(function(e){function t(t){for(var r,o,a=t[0],c=t[1],l=t[2],d=0,p=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},s=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("GlobalNotification"),n("router-view")],1)},s=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-center"},[n("v-snackbar",{attrs:{top:"",color:e.message.color,timeout:e.message.timeout},model:{value:e.message.active,callback:function(t){e.$set(e.message,"active",t)},expression:"message.active"}},[n("v-spacer"),e._v(" "+e._s(e.message.text)+" "),n("v-spacer")],1)],1)},a=[],c=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),l=n("2f62");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"GlobalNotification",computed:d({},Object(l["d"])(["message"]))},f=p,m=n("2877"),b=Object(m["a"])(f,o,a,!1,null,null,null),h=b.exports,g={components:{GlobalNotification:h},beforeCreate:function(){"cleared"!==localStorage.status&&(localStorage.clear(),localStorage.status="cleared",this.$router.go())},created:function(){this.$vuetify.theme.dark=!1}},v=g,y=(n("034f"),Object(m["a"])(v,i,s,!1,null,null,null)),j=y.exports,O=n("9483");Object(O["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var w=n("8c4f"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Toolbar"),n("v-content",[n("SubjectCard")],1)],1)},k=[],S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-navigation-drawer",{attrs:{dark:"",app:"",overflow:"",color:"primary"},model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[n("v-list",[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"font-weight-light",staticStyle:{"font-size":"1.5rem"}},[e._v(" napoly ")]),n("v-list-item-subtitle",{staticClass:"font-weight-light"},[e._v(" Student Document Repository ")])],1)],1),e.signedIn?n("v-list-item-group",[n("v-divider"),n("v-list-item",{staticStyle:{background:"#2d98da"},attrs:{dense:"",to:"/admin"}},[n("v-list-item-title",[e._v(e._s(e.username))])],1)],1):e._e(),n("v-divider"),n("YearList"),n("v-divider"),n("FieldList"),n("v-divider"),n("SemesterList"),n("v-divider"),n("SubjectList")],1)],1),n("v-app-bar",{attrs:{app:"",flat:"",dense:"",color:"white"}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.showDrawer=!e.showDrawer}}}),n("v-spacer"),e.showDrawer?e._e():n("v-toolbar-title",{staticClass:"primary--text font-weight-light"},[e._v("napoly.ch")])],1)],1)},P=[],x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",[n("v-subheader",{staticClass:"font-weight-light",staticStyle:{cursor:"pointer"},on:{click:e.changeSemester}},[e._v(e._s(e.currentSemesterName?e.currentSemesterName:"Semester wählen")+" "),n("v-spacer"),n("v-icon",{attrs:{small:""},on:{click:e.changeSemester}},[e._v(e._s(e.changingSemester?"mdi-chevron-up":"mdi-chevron-down"))])],1),e.changingSemester?n("v-list-item-group",e._l(e.semesters.data,(function(t){return n("v-list-item",{key:t.id,on:{click:function(n){return e.setCurrentSemester(t.id)}}},[e._v(" "+e._s(1===t.semesterHalf?"FS ":"HS ")+e._s(t.semesterYear)+" ")])})),1):e._e()],1)},C=[];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={name:"SemesterList",created:function(){this.getSemesters()},computed:D({},Object(l["d"])("napolyApiModule",["semesters","currentSemesterId","currentSemesterName","changingSemester"])),methods:D({},Object(l["b"])("napolyApiModule",["getSemesters","setCurrentSemester"]),{changeSemester:function(){this.$store.state.napolyApiModule.changingSemester=!this.changingSemester}})},L=E,A=Object(m["a"])(L,x,C,!1,null,"33003e8a",null),F=A.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.subjects.length?n("v-list",[n("v-subheader",{staticClass:"font-weight-light"},[e._v("Subjects")]),n("v-list-item-group",e._l(e.subjects,(function(t){return n("v-list-item",{key:t.id,staticClass:"font-weight-light white--text",attrs:{href:"#"+t.subjectName}},[e._v(" "+e._s(t.subjectName)+" ")])})),1),n("v-divider")],1):e._e()},T=[];function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={name:"SubjectList",created:function(){this.getSubjects()},computed:$({},Object(l["d"])("napolyApiModule",["subjects","currentSubjectId","currentSemesterId"])),methods:$({},Object(l["b"])("napolyApiModule",["getSubjects"]))},B=N,V=Object(m["a"])(B,M,T,!1,null,"6747949c",null),W=V.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",[n("v-subheader",{staticClass:"font-weight-light",staticStyle:{cursor:"pointer"},on:{click:e.changeField}},[e._v(e._s(e.currentFieldName?e.currentFieldName:"Departement wählen")+" "),n("v-spacer"),n("v-icon",{attrs:{small:""},on:{click:e.changeField}},[e._v(e._s(e.changingField?"mdi-chevron-up":"mdi-chevron-down"))])],1),e.changingField?n("v-list-item-group",e._l(e.fields.data,(function(t){return n("v-list-item",{key:t.id,on:{click:function(n){return e.setCurrentField(t.id)}}},[e._v(e._s(t.fieldName))])})),1):e._e()],1)},R=[];function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H={name:"FieldList",created:function(){this.getFields()},computed:z({},Object(l["d"])("napolyApiModule",["fields","currentFieldId","currentFieldName","changingField"])),methods:z({},Object(l["b"])("napolyApiModule",["getFields","setCurrentField"]),{changeField:function(){this.$store.state.napolyApiModule.changingField=!this.changingField}})},G=H,q=Object(m["a"])(G,Y,R,!1,null,null,null),X=q.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",[e.currentYear?n("v-subheader",{staticClass:"font-weight-light",staticStyle:{cursor:"pointer"},on:{click:e.changeYear}},[e._v(e._s(e.currentYear)+". Studienjahr "),n("v-spacer"),n("v-icon",{attrs:{small:""}},[e._v(e._s(e.changingYear?"mdi-chevron-up":"mdi-chevron-down"))])],1):n("v-subheader",{staticStyle:{cursor:"pointer"},on:{click:e.changeYear}},[e._v("Studienjahr wählen "),n("v-spacer"),n("v-icon",{attrs:{small:""}},[e._v(e._s(e.changingYear?"mdi-chevron-up":"mdi-chevron-down"))])],1),e.changingYear?n("v-list-item-group",e._l(e.years,(function(t){return n("v-list-item",{key:t.id,staticClass:"font-weight-light",on:{click:function(n){return e.setCurrentYear(t)}}},[e._v(e._s(t)+". Studienjahr ")])})),1):e._e()],1)},Q=[];function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te={name:"YearList",data:function(){return{years:[1,2,3]}},computed:ee({},Object(l["d"])("napolyApiModule",["currentYear","changingYear"])),methods:ee({},Object(l["b"])("napolyApiModule",["setCurrentYear"]),{changeYear:function(){this.$store.state.napolyApiModule.changingYear=!this.changingYear}})},ne=te,re=Object(m["a"])(ne,J,Q,!1,null,"7a3d6c2a",null),ie=re.exports;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae={name:"Toolbar",components:{YearList:ie,FieldList:X,SubjectList:W,SemesterList:F},created:function(){localStorage.username&&(this.username=localStorage.username)},data:function(){return{showDrawer:!0}},computed:oe({},Object(l["d"])(["signedIn"]))},ce=ae,le=Object(m["a"])(ce,S,P,!1,null,null,null),ue=le.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[e.currentFieldId&&e.currentSemesterId&&e.currentYear?n("div",[e.noresult?n("v-card",{staticClass:"mt-12 grey--text",attrs:{flat:""}},[n("v-card-title",{staticStyle:{"font-family":"Open Sans"}},[n("v-spacer"),e._v(" In diesem Semester existieren noch keine Links! "),n("v-spacer")],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"mx-2",attrs:{outlined:"",color:"primary",href:"mailto:marcotr@ethz.ch"}},[e._v("Schreib uns eine Mail")]),e._v(" falls du die Unterlagen dieses Semesters verwalten willst!"),n("v-spacer")],1)],1):e._e(),n("v-container",{staticClass:"fill-height",staticStyle:{height:"90vh",width:"110vw"}},[n("v-row",[n("v-col",{staticClass:"font-weight-light primary--text pb-0 text-center",staticStyle:{"font-size":"2.75rem"},attrs:{cols:"12"}},[e._v(" napoly.ch ")]),n("v-col",{staticClass:"font-weight-thin primary--text pt-0 text-center",staticStyle:{"font-size":"1.25rem","font-family":"Open Sans"},attrs:{cols:"12"}},[e._v(" Student Document Repository ")])],1)],1),e.loading?n("div",e._l(4,(function(e){return n("v-card",{key:e,staticClass:"my-2"},[n("v-skeleton-loader",{staticClass:"mx-auto my-5",attrs:{"max-width":"300",type:"card"}})],1)})),1):e._l(e.subjects,(function(t){return n("v-container",{key:t.id,staticClass:"pt-12",attrs:{id:t.subjectName}},[n("v-card",{attrs:{elevation:"2"}},[n("v-card-title",{staticClass:"primary--text font-weight-light",staticStyle:{"font-size":"1.75rem","font-family":"'Open Sans'"}},[e.authenticate(t)&&e.editMode!==t.id?n("v-btn",{staticClass:"mr-4",attrs:{tile:"",outlined:"",color:"info",small:""},on:{click:function(n){e.editMode=t.id}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1):e._e(),e.authenticate(t)&&e.editMode===t.id?n("v-btn",{staticClass:"mr-4",attrs:{tile:"",outlined:"",color:"error",small:""},on:{click:function(t){e.editMode=null}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-pencil-off")])],1):e._e(),e._v(" "+e._s(t.subjectName)+" "),n("v-spacer"),n("SubjectButtons",{staticClass:"hidden-sm-and-down",attrs:{subject:t,editMode:e.editMode}})],1),n("v-card-subtitle",{staticClass:"ml-2 mt-0 font-weight-light"},[e._v("Verantwortlich: "),e._l(e.responsible,(function(r){return n("span",{key:r},[r.subject==t.id?n("href",[e._v(e._s(r.creators.slice(0,3).join(", ")))]):e._e()],1)}))],2),n("SubjectButtons",{staticClass:"hidden-md-and-up mx-4",attrs:{subject:t,editMode:e.editMode}}),n("v-container",{attrs:{fluid:""}},[n("LinkTable",{attrs:{subject:t,editMode:e.editMode},on:{linksLoaded:function(t){return e.responsible.push(t)}}})],1),n("SubjectInfos",{attrs:{subject:t,editMode:e.editMode}}),e.signedIn&&1==e.userRole&&e.editMode===t.id?n("v-card-subtitle",{staticStyle:{cursor:"pointer"}},[n("span",{staticClass:"error--text",on:{click:function(n){e.confirmDelete=t.id}}},[e._v("Delete Subject")])]):e._e()],1),e.confirmDelete===t.id?n("v-snackbar",{attrs:{color:"primary"},model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}},[e._v(' Do you really want to delete "'+e._s(t.subjectName)+'" ? '),n("v-btn",{attrs:{color:"success"},on:{click:function(n){return e.deleteSubject(t.id,t.subjectName)}}},[e._v("Yes")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.confirmDelete=null}}},[e._v("No")])],1):e._e()],1)})),e.signedIn?n("v-container",[n("v-card",{staticStyle:{cursor:"pointer"},attrs:{outlined:""},on:{click:function(t){e.newSubject={subjectName:""}}}},[n("v-card-title",{staticClass:"primary--text"},[n("v-icon",{staticClass:"mr-6",attrs:{color:"primary"}},[e._v("mdi-plus")]),e._v("New Subject")],1)],1)],1):e._e()],2):n("div",[n("v-container",{staticClass:"fill-height",staticStyle:{height:"30vh",width:"100vw"}},[n("v-row",[n("v-col",{staticClass:"text-center font-weight-light primary--text pb-0",staticStyle:{"font-size":"3rem"},attrs:{cols:"12"}},[e._v(" napoly.ch ")]),n("v-col",{staticClass:"text-center font-weight-light primary--text pt-0",staticStyle:{"font-size":"1.25rem","font-family":"Open Sans"},attrs:{cols:"12"}},[e._v(" Student Document Repository ")])],1)],1),n("v-card",{staticClass:"grey--text",attrs:{flat:""}},[n("year-list"),n("field-list"),n("semester-list")],1)],1),n("ObjectEditor",{attrs:{objectToEdit:e.newSubject,active:e.newSubject,"forbidden-attributes":[""]},on:{updateObject:function(t){return e.addSubject(t)},cancel:function(t){e.newSubject=null}}})],1)},pe=[],fe=(n("d3b7"),n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-card",{staticClass:"ma-0 mb-6",attrs:{flat:"",outlined:""}},[n("v-simple-table",{attrs:{"fixed-header":""}},[n("thead",[n("tr",[n("th",{staticClass:"font-weight-light text-center"},[e._v("Week")]),e._l(e.typeIds,(function(t){return n("th",{key:t,staticClass:"font-weight-light text-center"},[e._v(e._s(e.types[t-1]))])})),e.editMode===e.subject.id?n("th",[n("v-btn",{attrs:{text:"",small:"",color:"primary"},on:{click:function(t){e.addingType=!0}}},[e._v("+")])],1):e._e()],2)]),n("tbody",{attrs:{align:"center"}},[e._l(e.subjectWeeks,(function(t){return n("tr",{key:t},[n("td",{staticClass:"font-weight-light"},[e._v(e._s(t))]),e._l(e.typeIds,(function(r){return n("td",{key:r,staticStyle:{cursor:"pointer"}},[e.typeWeekCombos.includes(r+"/"+t)&&e.editMode!==e.subject.id?n("a",{staticClass:"primary--text font-weight-light",staticStyle:{"text-decoration":"none"},attrs:{href:e.findLinkFromTypeAndWeek(r,t).linkUrl,target:"_blank"}},[n("span",{staticClass:"hidden-sm-and-down"},[e._v(e._s(e.types[r-1]))]),e._v(" "+e._s(t))]):n("span"),e.editMode===e.subject.id?n("v-btn",{attrs:{outlined:"",tile:"","x-small":"",color:"primary"},on:{click:function(n){return e.editLink(r,t)}}},[e._v(" "+e._s(e.typeWeekCombos.includes(r+"/"+t)?e.types[r-1]+" "+t:"+")+" ")]):n("span")],1)})),e.editMode===e.subject.id?n("td"):e._e()],2)})),e.editMode===e.subject.id?n("tr",[n("td",{staticClass:"text-center"},[n("v-btn",{staticClass:"pa-0 ma-0",attrs:{text:"","x-small":"",color:"primary"},on:{click:function(t){return e.subjectWeeks.push(e.subjectWeeks[e.subjectWeeks.length-1]+1)}}},[e._v("+ ")])],1)]):e._e()],2)])],1),n("ObjectEditor",{attrs:{objectToEdit:e.editedLink,"forbidden-attributes":e.forbiddenAttributes,active:e.editingLink},on:{updateObject:function(t){return e.updateLink(t)},cancel:function(t){e.editingLink=!1},delete:function(t){return e.removeLink(e.editedLink)}}}),n("ArraySelector",{attrs:{arrayToSelectFrom:e.types,active:e.addingType},on:{returnSelection:function(t){return e.addType(t)},cancel:function(t){e.addingType=!1}}})],1)}),me=[],be=(n("99af"),n("7db0"),n("caad"),n("c975"),n("a434"),n("2532"),n("ac1f"),n("5319"),n("bc3a")),he=n.n(be);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye="https://api.napoly.ch";ye="https://api.napoly.ch";var je=he.a.create({baseURL:ye,withCredentials:!0,headers:{"Content-Type":"application/json"}}),Oe=he.a.create({baseURL:ye,withCredentials:!0,headers:{"Content-Type":"application/json"}});je.interceptors.request.use((function(e){var t=e.method.toUpperCase();return"OPTIONS"!==t&&"GET"!==t&&(e.headers=ve({},e.headers,{"X-CSRF-TOKEN":localStorage.csrf})),e})),je.interceptors.response.use(null,(function(e){return e.response&&e.response.config&&401===e.response.status?Oe.post("/refresh",{},{headers:{"X-CSRF-TOKEN":localStorage.csrf}}).then((function(t){localStorage.csrf=t.data.csrf,localStorage.signedIn=!0;var n=e.response.config;return n.headers["X-CSRF-TOKEN"]=localStorage.csrf,Oe.request(n)})).catch((function(e){return delete localStorage.csrf,delete localStorage.signedIn,location.replace("/"),Promise.reject(e)})):Promise.reject(e)}));var we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("v-card",[e._l(e.objectValues,(function(t,r){return n("v-card-text",{key:t.id,staticClass:"py-2"},[e.objectKeys[r].includes("infoText")?n("div",[n("v-textarea",{staticClass:"ma-0 pb-0 pt-2",attrs:{"hide-details":"",outlined:"",label:e.objectKeys[r],type:typeof t},model:{value:e.objectValues[r],callback:function(t){e.$set(e.objectValues,r,t)},expression:"objectValues[index]"}}),n("v-btn",{staticClass:"pl-1 my-2",attrs:{small:"",outlined:"",tile:""},on:{click:function(t){e.objectValues[r]+=" [Link Title](URL)",e.active=!1,e.active=!0}}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-link-variant-plus")]),e._v("Add Link")],1),n("v-divider"),n("v-card",{staticClass:"mt-2"},[n("v-card-title",[e._v("Info Preview")]),n("v-card-text",[n("vue-markdown",{attrs:{source:e.objectValues[r]}})],1)],1)],1):e.objectKeys[r].includes("role")?n("v-select",{staticClass:"ma-0 pb-0 pt-2",attrs:{items:[{value:1,text:"Admin"},{value:0,text:"Moderator"}],"hide-details":"",outlined:"",label:e.objectKeys[r]},model:{value:e.objectValues[r],callback:function(t){e.$set(e.objectValues,r,t)},expression:"objectValues[index]"}}):e.objectKeys[r].includes("field_id")?n("v-select",{staticClass:"ma-0 pb-0 pt-2",attrs:{items:e.fields.data,"item-text":"fieldName","item-value":"id","hide-details":"",outlined:"",label:e.objectKeys[r]},model:{value:e.objectValues[r],callback:function(t){e.$set(e.objectValues,r,t)},expression:"objectValues[index]"}}):e.objectKeys[r].includes("password")?n("v-text-field",{staticClass:"ma-0 pb-0 pt-2",attrs:{"append-icon":e.showPassword?"mdi-eye-off":"mdi-eye","hide-details":"",outlined:"",label:e.objectKeys[r],type:e.showPassword?"text":"password"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.objectValues[r],callback:function(t){e.$set(e.objectValues,r,t)},expression:"objectValues[index]"}}):n("v-text-field",{staticClass:"ma-0 pb-0 pt-2",attrs:{"hide-details":"",outlined:"",label:e.objectKeys[r],type:typeof t},model:{value:e.objectValues[r],callback:function(t){e.$set(e.objectValues,r,t)},expression:"objectValues[index]"}})],1)})),n("v-card-actions",{staticClass:"mt-0 pt-0"},[n("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.$emit("delete")}}},[e._v(" Delete ")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.$emit("updateObject",{objectKeys:e.objectKeys,objectValues:e.objectValues})}}},[e._v(" Send ")])],1)],2)],1)},_e=[],ke=(n("07ac"),n("9ce6")),Se=n.n(ke);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={name:"ObjectEditor",components:{VueMarkdown:Se.a},props:{objectToEdit:{},active:null,forbiddenAttributes:null},data:function(){return{objectKeys:[],objectValues:[],newField:null,showPassword:!1}},computed:xe({},Object(l["d"])("napolyApiModule",["fields"])),watch:{objectToEdit:function(){this.active&&this.initializeObject()}},methods:{initializeObject:function(){for(var e in this.objectKeys=Object.keys(this.objectToEdit),this.objectValues=Object.values(this.objectToEdit),this.objectValues)null===this.objectValues[e]&&(this.objectValues[e]=" ");for(var t=this.objectKeys.length-1;t>=0;t--)this.forbiddenAttributes.includes(this.objectKeys[t])&&(this.objectKeys.splice(t,1),this.objectValues.splice(t,1))}}},Ie=Ce,De=Object(m["a"])(Ie,we,_e,!1,null,null,null),Ee=De.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"600",persistent:""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("v-card",[n("v-container",{staticClass:"pa-0 font-weight-light",staticStyle:{"font-family":"Open Sans"},attrs:{fluid:""}},[n("v-data-iterator",{attrs:{items:e.searchedArray,"single-select":"","items-per-page":e.itemsPerPage,page:e.page,"hide-default-footer":""},on:{"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t}},scopedSlots:e._u([{key:"header",fn:function(){return[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary"}},[n("v-text-field",{attrs:{flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-magnify",label:"Search types"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"default",fn:function(t){return[n("v-list-item-group",[n("v-list",{staticClass:"pa-0"},e._l(t.items,(function(t){return n("v-list-item",{key:t,attrs:{color:t===e.elementToReturn?"primary":""},on:{click:function(n){e.elementToReturn=t}}},[n("span",[e._v(e._s(t))])])})),1)],1)]}}])})],1),n("v-card-actions",[n("span",{staticClass:"mr-4 grey--text font-weight-light",staticStyle:{"font-family":"Open Sans"}},[e._v("Page "+e._s(e.page)+" of "+e._s(e.numberOfPages))]),n("v-btn",{staticClass:"mr-1",attrs:{outlined:"",color:"primary","x-small":""},on:{click:e.formerPage}},[n("v-icon",[e._v("mdi-chevron-left")])],1),n("v-btn",{staticClass:"ml-1",attrs:{"x-small":"",outlined:"",color:"primary"},on:{click:e.nextPage}},[n("v-icon",[e._v("mdi-chevron-right")])],1),n("v-spacer"),n("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" Cancel ")]),e.elementToReturn?n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.$emit("returnSelection",e.elementToReturn)}}},[e._v(" Select ")]):e._e()],1)],1)],1)},Ae=[],Fe=(n("fb6a"),n("841c"),{name:"ArraySelector",props:{arrayToSelectFrom:null,active:null},data:function(){return{elementToReturn:null,itemsPerPageArray:[4,8,12],search:"",filter:{},sortDesc:!1,page:1,itemsPerPage:6}},computed:{numberOfPages:function(){return Math.ceil(this.searchedArray.length/this.itemsPerPage)},searchedArray:function(){var e=this;return 0!==this.search.length&&null!==this.search.length?this.arrayToSelectFrom.filter((function(t){return t.includes(e.search)||t.includes(e.capitalize(e.search))})):this.arrayToSelectFrom}},watch:{numberOfPages:function(){this.page=1}},methods:{nextPage:function(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage:function(){this.page-1>=1&&(this.page-=1)},updateItemsPerPage:function(e){this.itemsPerPage=e},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}}),Me=Fe,Te=Object(m["a"])(Me,Le,Ae,!1,null,null,null),Ue=Te.exports;function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be={name:"LinkTable",components:{ArraySelector:Ue,ObjectEditor:Ee},created:function(){this.getSubjectLinks()},props:{subject:null,editMode:null},data:function(){return{subjectWeeks:[],typeIds:[],subjectLinks:[],typeWeekCombos:[],editingLink:!1,editedLink:{},addingType:!1,newLink:{},creators:[],forbiddenAttributes:["id","created_at","updated_at","creator","editor","linkWeek","type_id","subject_id"]}},computed:Ne({},Object(l["d"])("napolyApiModule",["types","subjects"]),{},Object(l["d"])(["signedIn","message"])),methods:Ne({},Object(l["c"])(["setMessage"]),{getSubjectLinks:function(){var e=this;Oe.get("/api/v1/links?subject_id=".concat(this.subject.id)).then((function(t){function n(e,t){return e<t?-1:e>t?1:0}e.subjectLinks=t.data,t.data.forEach((function(t){e.creators.includes(t.creator)||e.creators.push(t.creator),e.typeIds.includes(t.type_id)||e.typeIds.push(t.type_id);while(!e.subjectWeeks.includes(t.linkWeek))e.subjectWeeks.push(t.linkWeek);e.typeWeekCombos.push("".concat(t.type_id,"/").concat(t.linkWeek))})),e.subjectWeeks.sort(n),e.$emit("linksLoaded",{subject:e.subject.id,creators:e.creators})}))},findLinkFromTypeAndWeek:function(e,t){return this.subjectLinks.find((function(n){return n.type_id===e&&n.linkWeek===t}))},editLink:function(e,t){if(this.findLinkFromTypeAndWeek(e,t)&&(this.newLink.id=this.findLinkFromTypeAndWeek(e,t).id),this.newLink.type_id=e,this.newLink.linkWeek=t,this.newLink.subject_id=this.subject.id,this.editedLink=this.findLinkFromTypeAndWeek(e,t),this.editingLink=!0,this.editMode===this.subject.id&&void 0===this.editedLink){var n={linkWeek:t,type_id:e,linkUrl:"",subject_id:this.subject.id};this.editedLink=n,this.editingLink=!0}},updateLink:function(e){var t=this;for(var n in this.editingLink=!1,e.objectKeys)this.newLink[e.objectKeys[n]]=e.objectValues[n];0!==this.newLink.linkUrl.length&&void 0===this.newLink.id?(this.newLink.creator=localStorage.username,this.newLink.editor="",je.post("/api/v1/links",this.newLink).then((function(e){t.message.text="Link ".concat(e.data.id," added"),t.message.color="info",t.message.active=!0,t.subjectLinks.push(e.data),t.typeWeekCombos.push("".concat(e.data.type_id,"/").concat(e.data.linkWeek))}))):0!==this.newLink.linkUrl.length&&void 0!==this.newLink.id?(this.newLink.editor=localStorage.username,je.patch("/api/v1/links/".concat(this.newLink.id),this.newLink).then((function(e){t.message.text="Link ".concat(e.data.id," updated"),t.message.color="info",t.message.active=!0}))):(this.message.text="Invalid link",this.message.color="error",this.message.active=!0)},removeLink:function(e){je.delete("/api/v1/links/".concat(e.id)).then(this.editingLink=!1,this.typeWeekCombos.splice(this.typeWeekCombos.indexOf("".concat(e.type_id,"/").concat(e.linkWeek)),1),this.message.text="Link ".concat(e.id," removed"),this.message.color="warning",this.message.active=!0)},addType:function(e){this.addingType=!1,this.typeIds.push(this.types.indexOf(e)+1)}})},Ve=Be,We=Object(m["a"])(Ve,fe,me,!1,null,null,null),Ye=We.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.editMode!==e.subject.id?n("div",[e._l(e.buttons,(function(t){return n("v-btn",{key:"inline"+t.id,staticClass:"mx-1 hidden-sm-and-down white--text",attrs:{depressed:"",color:"primary",href:t.buttonUrl,small:"",target:"_blank"}},[e._v(" "+e._s(t.buttonLabel)+" ")])})),e._l(e.buttons,(function(t){return n("v-btn",{key:"block"+t.id,staticClass:"my-2 hidden-md-and-up white--text",attrs:{depressed:"",color:"primary",href:t.buttonUrl,small:"",target:"_blank",block:""}},[e._v(" "+e._s(t.buttonLabel)+" ")])}))],2):n("div",[e._l(e.buttons,(function(t){return n("v-btn",{key:"inline"+t.id,staticClass:"mx-1 px-1 hidden-sm-and-down",attrs:{small:"",target:"_blank",outlined:"",color:"info",tile:""},on:{click:function(n){return e.editButton(t)}}},[e._v(e._s(t.buttonLabel)+" ")])})),e._l(e.buttons,(function(t){return n("v-btn",{key:"block"+t.id,staticClass:"my-1 hidden-md-and-up",attrs:{small:"",target:"_blank",outlined:"",color:"info",tile:"",block:""},on:{click:function(n){return e.editButton(t)}}},[e._v(e._s(t.buttonLabel)+" ")])})),n("v-btn",{staticClass:"pa-0 hidden-sm-and-down ml-4",attrs:{color:"primary",outlined:"",small:"",tile:""},on:{click:function(t){return e.editButton({buttonUrl:"",buttonLabel:"",subject_id:e.subject.id})}}},[e._v(" + ")]),n("v-btn",{staticClass:"hidden-md-and-up mt-4",attrs:{color:"primary",outlined:"",small:"",tile:"",block:""},on:{click:function(t){return e.editButton({buttonUrl:"",buttonLabel:"",subject_id:e.subject.id})}}},[e._v(" + ")])],2),n("ObjectEditor",{attrs:{objectToEdit:e.newButton,"forbidden-attributes":e.forbiddenAttributes,active:e.editingButton},on:{updateObject:function(t){return e.updateButton(t)},cancel:function(t){e.editingButton=!1},delete:function(t){return e.removeButton(e.newButton)}}})],1)},Ke=[];function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge={name:"SubjectButtons",components:{ObjectEditor:Ee},created:function(){this.getButtons()},props:{subject:null,editMode:null},data:function(){return{buttons:[],editingButton:!1,newButton:{},forbiddenAttributes:["id","created_at","updated_at","creator","editor","linkWeek","subject_id","type_id"]}},computed:He({},Object(l["d"])(["message"])),methods:{getButtons:function(){var e=this;Oe.get("/api/v1/buttons?subject_id=".concat(this.subject.id)).then((function(t){e.buttons=t.data}))},editButton:function(e){this.editMode===this.subject.id&&(this.editingButton=!0,this.newButton=e)},updateButton:function(e){var t=this;for(var n in this.editingButton=!1,e.objectKeys)this.newButton[e.objectKeys[n]]=e.objectValues[n];0!==this.newButton.buttonUrl.length&&0!==this.newButton.buttonLabel.length&&void 0===this.newButton.id?je.post("/api/v1/buttons",this.newButton).then((function(e){t.message.text="Button ".concat(e.data.id," added"),t.message.color="info",t.message.active=!0,t.buttons.push(e.data)})).catch((function(e){t.message.text=e,t.message.color="error",t.message.active=!0})):0!==this.newButton.buttonUrl.length&&0!==this.newButton.buttonLabel.length&&void 0!==this.newButton.id?je.patch("/api/v1/buttons/".concat(this.newButton.id),this.newButton).then((function(e){t.message.text="Button ".concat(e.data.id," updated"),t.message.color="info",t.message.active=!0})).catch((function(e){t.message.text=e,t.message.color="error",t.message.active=!0})):(this.message.text="Invalid Button",this.message.color="error",this.message.active=!0)},removeButton:function(e){je.delete("/api/v1/buttons/".concat(e.id)).then(this.editingButton=!1,this.buttons.splice(this.buttons.indexOf(e),1),this.message.text="Button ".concat(e.id," removed"),this.message.color="warning",this.message.active=!0)}}},qe=Ge,Xe=Object(m["a"])(qe,Re,Ke,!1,null,null,null),Je=Xe.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[e._l(e.infos,(function(t){return n("div",{key:t.id},[n("v-card",{staticClass:"mx-4 mb-10",attrs:{outlined:e.editMode===e.subject.id,elevation:"0"}},[n("v-card-title",{class:e.editMode===e.subject.id?"pt-4 primary--text font-weight-light pb-0":"pt-1 primary--text font-weight-light px-0 pb-0",staticStyle:{"font-family":"Open Sans","word-break":"keep-all"}},[e.editMode===e.subject.id?n("v-btn",{staticClass:"mr-2",attrs:{"x-small":"",outlined:"",tile:"",color:"primary"},on:{click:function(n){return e.editInfo(t,t.id)}}},[n("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1):e._e(),e._v(" "+e._s(t.infoTitle)+" "),n("v-divider",{staticClass:"mx-6 hidden-sm-and-down"})],1),n("v-card-title",{class:e.editMode===e.subject.id?"body-2 grey--text font-weight-light pt-0 pb-4":"body-2 grey--text font-weight-light pa-0 pb-4 px-0",staticStyle:{"font-family":"Open Sans"}},[e._v("Editiert am "+e._s(e.convertDate(t.updated_at.substring(0,10))))]),n("v-card-text",{class:e.editMode===e.subject.id?"pb-0 pb-4":"pb-0 px-0"},[n("vue-markdown",[e._v(e._s(t.infoText))])],1)],1)],1)})),e.editMode===e.subject.id?n("v-card",{staticClass:"mx-4 my-2 text-center",staticStyle:{cursor:"pointer"},attrs:{outlined:""},on:{click:function(t){return e.editInfo({infoTitle:"",infoText:"",subject_id:e.subject.id})}}},[n("v-card-text",[n("v-icon",[e._v("mdi-plus")])],1)],1):e._e(),n("ObjectEditor",{attrs:{objectToEdit:e.editedInfo,active:e.editingInfo,"forbidden-attributes":e.forbiddenAttributes},on:{updateObject:function(t){return e.updateInfo(t)},cancel:function(t){e.editingInfo=!1},delete:function(t){return e.removeInfo(e.editedInfo)}}})],2)},Ze=[];function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt={name:"SubjectInfos",components:{ObjectEditor:Ee,VueMarkdown:Se.a},created:function(){this.getInfos()},props:{subject:null,editMode:null},data:function(){return{infos:[],editingInfo:!1,editedInfo:{},newInfo:{},forbiddenAttributes:["id","created_at","updated_at","creator","editor","linkWeek","subject_id","type_id"]}},computed:tt({},Object(l["d"])(["message"])),methods:{getInfos:function(){var e=this;this.infos=[],Oe.get("/api/v1/infos?subject_id=".concat(this.subject.id)).then((function(t){e.infos=t.data}))},editInfo:function(e,t){this.newInfo.id=t,this.newInfo.subject_id=this.subject.id,this.editMode===this.subject.id&&(this.editingInfo=!0,this.editedInfo=e)},updateInfo:function(e){var t=this;for(var n in this.editingInfo=!1,e.objectKeys)this.newInfo[e.objectKeys[n]]=e.objectValues[n];0!==this.newInfo.infoTitle.length&&0!==this.newInfo.infoText.length&&void 0===this.newInfo.id?je.post("/api/v1/infos",this.newInfo).then((function(e){t.message.text="Info ".concat(e.data.id," added"),t.message.color="info",t.message.active=!0,t.getInfos()})).catch((function(e){t.message.text=e,t.message.color="error",t.message.active=!0})):0!==this.newInfo.infoTitle.length&&0!==this.newInfo.infoText.length&&void 0!==this.newInfo.id?je.patch("/api/v1/infos/".concat(this.newInfo.id),this.newInfo).then((function(e){t.message.text="Info ".concat(e.data.id," updated"),t.message.color="info",t.message.active=!0,t.getInfos()})).catch((function(e){t.message.text=e,t.message.color="error",t.message.active=!0})):(this.message.text="Invalid Info",this.message.color="error",this.message.active=!0)},removeInfo:function(e){je.delete("/api/v1/infos/".concat(e.id)).then(this.editingInfo=!1,this.infos.splice(this.infos.indexOf(e),1),this.message.text="Info ".concat(e.id," removed"),this.message.color="warning",this.message.active=!0)},convertDate:function(e){var t=e.substring(0,4),n=e.substring(5,7),r=e.substring(8,10);return r+"."+n+"."+t}}},rt=nt,it=Object(m["a"])(rt,Qe,Ze,!1,null,null,null),st=it.exports;function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct={name:"SubjectCard",components:{ObjectEditor:Ee,SemesterList:F,YearList:ie,FieldList:X,SubjectInfos:st,SubjectButtons:Je,LinkTable:Ye},created:function(){this.userRole=localStorage.userRole,this.userField=localStorage.userField},props:{subjectId:null},data:function(){return{confirmDelete:null,editMode:null,firstTimeUse:!1,newSubject:null,userField:null,responsible:[]}},computed:at({},Object(l["d"])("napolyApiModule",["subjects","currentFieldId","currentSemesterId","currentYear"]),{},Object(l["d"])(["loading","noresult","signedIn","message"])),methods:at({},Object(l["b"])("napolyApiModule",["getSubjects"]),{addSubject:function(e){var t=this;this.newSubject=null;var n={subjectName:e.objectValues[0],semester_id:this.currentSemesterId,field_id:this.currentFieldId,year:this.currentYear};je.post("/api/v1/subjects",n).then(this.getSubjects,this.message.text='Subject "'.concat(e.objectValues[0],'" has been created'),this.message.color="success",this.message.active=!0).catch((function(e){t.message.text=e,t.message.color="error",t.message.active=!0}))},deleteSubject:function(e,t){this.confirmDelete=!1,je.delete("/api/v1/subjects/"+e).then(this.getSubjects,this.message.text='Subject "'.concat(t,'" has been deleted'),this.message.color="warning",this.message.active=!0)},authenticate:function(e){return this.signedIn&&(e.field_id.toString()===this.userField||"1"===this.userRole)}})},lt=ct,ut=Object(m["a"])(lt,de,pe,!1,null,null,null),dt=ut.exports;function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt={name:"home",created:function(){this.getTypes()},components:{SubjectCard:dt,Toolbar:ue},methods:ft({},Object(l["b"])("napolyApiModule",["getTypes"]))},bt=mt,ht=Object(m["a"])(bt,_,k,!1,null,null,null),gt=ht.exports,vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("AdminToolbar"),n("v-content",[n("v-container",[n("v-card",{attrs:{flat:""}},[n("v-card-title",{staticClass:"grey--text"},[n("v-spacer"),e._v("Change Password"),n("v-spacer")],1),n("v-card-text",[n("v-text-field",{staticClass:"mb-6",attrs:{outlined:"",label:"New Password",color:"primary",type:"password","prepend-inner-icon":"mdi-lock","hide-details":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-text-field",{attrs:{label:"Password Confirmation",color:"primary",outlined:"",type:"password","prepend-inner-icon":"mdi-lock","hide-details":""},model:{value:e.password_confirmation,callback:function(t){e.password_confirmation=t},expression:"password_confirmation"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{tile:"",outlined:"",color:"primary"},on:{click:e.changePassword}},[e._v("Submit")]),n("v-spacer")],1)],1)],1)],1)],1)},yt=[],jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-navigation-drawer",{attrs:{dark:"",app:"",overflow:"",color:"primary"},model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[n("v-list",[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"font-weight-light",staticStyle:{"font-size":"1.5rem"}},[e._v(" napoly ")]),n("v-list-item-subtitle",{staticClass:"font-weight-light"},[e._v(" Student Document Repository ")])],1)],1),n("v-divider"),n("v-list-item-group",[n("v-list-item",{attrs:{to:"/"}},[n("v-list-item-icon",{staticClass:"mr-2"},[n("v-icon",{attrs:{small:"",color:"white"}},[e._v("mdi-home")])],1),n("v-list-item-title",{staticClass:"font-weight-light white--text"},[e._v("Homepage")])],1),n("v-divider"),n("v-list-item",{attrs:{to:"/admin"}},[n("v-list-item-icon",{staticClass:"mr-2"},[n("v-icon",{attrs:{small:"",color:"white"}},[e._v("mdi-account-cowboy-hat")])],1),n("v-list-item-title",{staticClass:"font-weight-light white--text"},[e._v("My Account")])],1),n("v-divider"),"1"===e.userRole?n("v-list-item",{attrs:{to:"/account"}},[n("v-list-item-icon",{staticClass:"mr-2"},[n("v-icon",{attrs:{small:"",color:"white"}},[e._v("mdi-account-multiple-plus")])],1),n("v-list-item-title",{staticClass:"font-weight-light white--text"},[e._v("User Management")])],1):e._e(),"1"===e.userRole?n("v-divider"):e._e(),n("v-list-item",{on:{click:function(t){return e.signOut()}}},[n("v-list-item-icon",{staticClass:"mr-2"},[n("v-icon",{attrs:{small:"",color:"white"}},[e._v("mdi-logout")])],1),n("v-list-item-title",{staticClass:"font-weight-light white--text"},[e._v("Log Out")])],1),n("v-divider")],1)],1)],1),n("v-app-bar",{attrs:{app:"",flat:"",dense:"",color:"white"}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.showDrawer=!e.showDrawer}}})],1)],1)},Ot=[],wt={name:"AdminToolbar",created:function(){"true"!==localStorage.signedIn&&this.$router.replace("/"),this.userRole=localStorage.userRole},data:function(){return{showDrawer:!0,username:null,userRole:null}},methods:{signOut:function(){var e=this;this.$store.signedIn=!1,je.delete("/signin").then((function(t){delete localStorage.csrf,delete localStorage.signedIn,delete localStorage.username,delete localStorage.uid,delete localStorage.userRole,delete localStorage.userField,e.$store.state.signedIn=!1,e.$router.replace("/")}))}}},_t=wt,kt=Object(m["a"])(_t,jt,Ot,!1,null,null,null),St=kt.exports;function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct={name:"AdminInterface",components:{AdminToolbar:St},created:function(){this.username=localStorage.username,this.uid=localStorage.uid,this.userField=localStorage.userField},data:function(){return{uid:null,username:null,email:null,password:null,password_confirmation:null}},computed:xt({},Object(l["d"])(["message"])),methods:{changePassword:function(){var e=this;this.password===this.password_confirmation?je.patch("/api/v1/users/"+this.uid,{field_id:this.userField,email:this.username,password:this.password,password_confirmation:this.password_confirmation}).then(this.message.text="Password updated",this.message.color="success",this.message.active=!0).catch((function(t){e.message.text=t,e.message.color="error",e.message.active=!0})):(this.message.text="Password and confirmation do not match",this.message.color="error",this.message.active=!0)}}},It=Ct,Dt=Object(m["a"])(It,vt,yt,!1,null,"f0284db0",null),Et=Dt.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",{attrs:{fluid:""}},[n("v-container",{staticClass:"fill-height"},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{sm:"12",md:"6"}},[n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:""}},[n("v-spacer"),n("v-toolbar-title",{staticClass:"grey--text"},[e._v("Sign in to napoly.ch")]),n("v-spacer")],1),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{solo:"",label:"Username",name:"Username","prepend-inner-icon":"mdi-account",type:"text"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signin(t)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{solo:"",id:"password",label:"Password",name:"password","prepend-inner-icon":"mdi-lock",type:"password"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.signin(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:e.signin}},[e._v("Sign in")]),n("v-spacer")],1)],1)],1)],1)],1)],1)},At=[];function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt={name:"Signin",created:function(){localStorage.signedIn&&(this.message.text="Already Signed in",this.message.color="warning",this.message.active=!0,this.$router.replace("/admin"))},data:function(){return{email:"",password:""}},computed:Mt({},Object(l["d"])(["message","signedIn"])),methods:{signin:function(){var e=this;if(!this.email||!this.password)return this.message.text="Invalid e-mail or password",this.message.color="error",void(this.message.active=!0);Oe.post("/signin",{email:this.email,password:this.password}).then((function(t){t.data.csrf&&(localStorage.csrf=t.data.csrf,localStorage.username=t.data.username,localStorage.uid=t.data.id,localStorage.userRole=t.data.role,localStorage.userField=t.data.field_id,localStorage.signedIn=!0,e.signedIn=!0,e.$router.replace("/"),e.message.text="Signin Successful",e.message.color="success",e.message.active=!0)})).catch((function(t){e.message.text=t,e.message.color="error",e.message.active=!0}))}}},Ut=Tt,$t=Object(m["a"])(Ut,Lt,At,!1,null,null,null),Nt=$t.exports,Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("AdminToolbar"),n("v-content",[1==e.userRole?n("UserExplorer"):n("v-card",[n("v-card-title",[e._v("Not permitted")])],1)],1)],1)},Vt=[],Wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-data-iterator",{attrs:{items:e.searchedArray,"single-select":"","items-per-page":100,page:e.page,"hide-default-footer":""},scopedSlots:e._u([{key:"header",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-text-field",{attrs:{flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"mdi-account-search",label:"Search User"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),n("v-btn",{staticClass:"ml-4",attrs:{text:"",outlined:""},on:{click:function(t){return e.editUser({email:"",field_id:1,role:1,password:"",password_confirmation:""})}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-account-plus")]),e._v(" Add User ")],1)],1)]},proxy:!0},{key:"default",fn:function(t){return[n("v-list",[n("v-list-item-group",{model:{value:t.items,callback:function(n){e.$set(t,"items",n)},expression:"props.items"}},e._l(t.items,(function(t){return n("div",{key:t.id},[n("v-list-item",{attrs:{"three-line":"",color:"primary"},on:{click:function(n){return e.editUser(t)}}},[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.email))]),n("v-list-item-subtitle",[e._v("Role: "+e._s(1===t.role?"Admin":"Moderator")+" "),n("v-spacer"),e._v(" Field: "+e._s(e.fields.data[t.field_id-1].fieldName)+" ")],1)],1)],1),n("v-divider")],1)})),0)],1)]}}])}),n("ObjectEditor",{attrs:{"object-to-edit":e.editedUser,"forbidden-attributes":e.forbiddenAttributes,active:e.editingUser},on:{cancel:function(t){e.editingUser=!1},updateObject:function(t){return e.updateUser(t)},delete:function(t){return e.removeUser(e.editedUser)}}})],1)},Yt=[];function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zt={name:"UserExplorer",components:{ObjectEditor:Ee},created:function(){this.getUsers(),this.getFields()},data:function(){return{users:[],editedUser:{},editingUser:!1,search:"",page:1,itemsPerPage:4,forbiddenAttributes:["password_digest","created_at","updated_at","id"]}},computed:Kt({},Object(l["d"])(["message"]),{},Object(l["d"])("napolyApiModule",["fields"]),{numberOfPages:function(){return Math.ceil(this.searchedArray.length/this.itemsPerPage)},searchedArray:function(){var e=this;return 0!==this.search.length&&null!==this.search.length?this.users.filter((function(t){return t.email.includes(e.search)||t.email.includes(e.capitalize(e.search))})):this.users}}),methods:Kt({},Object(l["b"])("napolyApiModule",["getFields"]),{getUsers:function(){var e=this;je.get("/api/v1/users").then((function(t){e.users=t.data}))},editUser:function(e){this.editingUser=!0,this.editedUser=e},updateUser:function(e){var t=this;for(var n in this.editingUser=!1,e.objectKeys)this.editedUser[e.objectKeys[n]]=e.objectValues[n];0!==this.editedUser.email.length&&null!==this.editedUser.field_id&&void 0===this.editedUser.id?je.post("/signup",this.editedUser).then((function(e){t.message.text="User ".concat(t.editedUser.email," added"),t.message.color="info",t.message.active=!0,t.users=[],t.getUsers()})).catch((function(e){t.message.text=e,t.message.color="error",t.message.active=!0})):0!==this.editedUser.email.length&&null!==this.editedUser.field_id&&void 0!==this.editedUser.id?je.patch("/api/v1/users/".concat(this.editedUser.id),this.editedUser).then((function(e){t.message.text="User ".concat(e.data.id," updated"),t.message.color="info",t.message.active=!0,t.getUsers()})).catch((function(e){t.message.text=e,t.message.color="error",t.message.active=!0})):(this.message.text="Invalid User",this.message.color="error",this.message.active=!0)},removeUser:function(e){je.delete("/api/v1/users/".concat(e.id)).then(this.search="",this.editingUser=!1,this.users.splice(this.users.indexOf(e),1),this.message.text="User ".concat(e.email," removed"),this.message.color="warning",this.message.active=!0)},nextPage:function(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage:function(){this.page-1>=1&&(this.page-=1)},updateItemsPerPage:function(e){this.itemsPerPage=e},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}})},Ht=zt,Gt=Object(m["a"])(Ht,Wt,Yt,!1,null,"7babf5ec",null),qt=Gt.exports,Xt={name:"AdminInterface",components:{UserExplorer:qt,AdminToolbar:St},created:function(){this.userRole=localStorage.userRole},data:function(){return{userRole:null}}},Jt=Xt,Qt=Object(m["a"])(Jt,Bt,Vt,!1,null,"d98e70c6",null),Zt=Qt.exports;r["default"].use(w["a"]);var en=[{path:"/",name:"Home",component:gt},{path:"/admin",name:"Admin Interface",component:Et},{path:"/signin",name:"Sign In",component:Nt},{path:"/account",name:"Account",component:Zt},{path:"/*",name:"redirect",component:gt}],tn=new w["a"]({routes:en}),nn=tn,rn={namespaced:!0,state:{currentSemesterId:parseInt(localStorage.currentSemesterId,10),currentFieldId:localStorage.currentFieldId,currentYear:localStorage.currentYear,currentSemesterName:"",currentFieldName:"",subjects:[],fields:[],semesters:[],types:[],changingYear:!1,changingField:!1,changingSemester:!1},mutations:{changeSemesterName:function(){var e=rn.state.currentSemesterId-1,t=rn.state.semesters.data[e].semesterYear;e=1===rn.state.semesters.data[e].semesterHalf?"FS ":"HS ",rn.state.currentSemesterName=e+t}},actions:{setCurrentSemester:function(e,t){var n=e.dispatch,r=e.commit;localStorage.currentSemesterId=t,rn.state.currentSemesterId=t,n("getSubjects"),r("changeSemesterName"),rn.state.changingSemester=!1},setCurrentYear:function(e,t){var n=e.dispatch;e.commit;localStorage.currentYear=t,rn.state.currentYear=t,n("getSubjects"),rn.state.changingYear=!1},setCurrentField:function(e,t){var n=e.dispatch;e.commit;localStorage.currentFieldId=t,rn.state.currentFieldId=t,n("getSubjects"),rn.state.currentFieldName=rn.state.fields.data[rn.state.currentFieldId-1].fieldName,rn.state.changingField=!1},getSemesters:function(e){var t=e.commit;rn.state.semesters=[],Oe.get("/api/v1/semesters").then((function(e){rn.state.semesters=e,t("changeSemesterName")}))},getFields:function(){rn.state.fields=[],Oe.get("/api/v1/fields").then((function(e){rn.state.fields=e,rn.state.currentFieldName=e.data[rn.state.currentFieldId-1].fieldName}))},getTypes:function(){rn.state.types=[],Oe.get("/api/v1/types").then((function(e){e.data.forEach((function(e){rn.state.types.push(e.typeName)}))}))},getSubjects:function(){var e=this;rn.state.subjects=[],this.state.loading=!0,this.state.noresult=!1,Oe.get("/api/v1/subjects").then((function(t){t.data.forEach((function(e){var t=e.semester_id.toString()===rn.state.currentSemesterId.toString(),n=e.field_id.toString()===rn.state.currentFieldId.toString(),r=e.year.toString()===rn.state.currentYear.toString();t&&n&&r&&rn.state.subjects.push(e)})),e.state.loading=!1,0===rn.state.subjects.length&&(e.state.noresult=!0)}))}}},sn=rn;r["default"].use(l["a"]);var on=new l["a"].Store({modules:{napolyApiModule:sn},state:{loading:!1,noresult:!1,signedIn:localStorage.signedIn,showToolbar:!0,message:{active:!1,timeout:4e3,text:"Empty",color:"warning"}},mutations:{messageSetter:function(e){this.state.message.active=e},setMessage:function(e,t){this.state.message.text=e,this.state.message.color=t,this.state.message.active=!0}}}),an=n("ce5b"),cn=n.n(an);n("bf40");r["default"].use(cn.a);var ln=new cn.a({theme:{themes:{light:{primary:"#3da4ea",secondary:"#b0bec5",anchor:"#8c9eff"}}}}),un=n("a7fe"),dn=n.n(un);r["default"].config.productionTip=!1,r["default"].use(dn.a,{secured:je,plain:Oe}),r["default"].config.productionTip=!1,new r["default"]({router:nn,store:on,securedAxiosInstance:je,plainAxiosInstance:Oe,vuetify:ln,render:function(e){return e(j)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.af5d3f85.js.map